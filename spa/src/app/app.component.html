<main class="container card">
    <p-card>
        <h1 class="mt-0 mb-4">Decorations list - MH Rise</h1>
        <section id="lang-selection" class="mb-4 flex align-items-center">
            <p-dropdown [options]="langs" optionLabel="name" [(ngModel)]="sourceLang" (onChange)="onChangeSourceLang()"
                [filter]="true" filterBy="name" [showClear]="true" placeholder="Select a Country">
                <ng-template pTemplate="selectedItem">
                    <div class="flag-item flag-item-value" *ngIf="sourceLang">
                        <img src="assets/flags/flag_placeholder.png" [class]="'flag flag-' + sourceLang.flag" />
                        <div>{{sourceLang.name}}</div>
                    </div>
                </ng-template>
                <ng-template let-lang pTemplate="item">
                    <div class="flex align-items-center">
                        <img src="assets/flags/flag_placeholder.png" [class]="'flag flag-' + lang.flag" />
                        <div>{{lang.name}}</div>
                    </div>
                </ng-template>
            </p-dropdown>
            <i class="pi pi-arrow-right mx-4 my-2"></i>
            <p-dropdown [options]="langs" optionLabel="name" [(ngModel)]="targetLang" (onChange)="onChangeTargetLang()"
                [filter]="true" filterBy="name" [showClear]="true" placeholder="Select a Country">
                <ng-template pTemplate="selectedItem">
                    <div class="flag-item flag-item-value" *ngIf="targetLang">
                        <img src="assets/flags/flag_placeholder.png" [class]="'flag flag-' + targetLang.flag" />
                        <div>{{targetLang.name}}</div>
                    </div>
                </ng-template>
                <ng-template let-lang pTemplate="item">
                    <div class="flex align-items-center">
                        <img src="assets/flags/flag_placeholder.png" [class]="'flag flag-' + lang.flag" />
                        <div>{{lang.name}}</div>
                    </div>
                </ng-template>
            </p-dropdown>
        </section>
        <section id="search" class="mb-4">
            <span class="p-input-icon-left w-full">
                <i class="pi pi-search"></i>
                <input type="text" pInputText placeholder="Search" [(ngModel)]="query" (ngModelChange)="onSearch()"
                    class="w-full" />
            </span>
        </section>
        <section id="table">
            <p-table [value]="queriedJewels" responsiveLayout="scroll">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Original name</th>
                        <th>Target name</th>
                        <th>Ability</th>
                        <th>Description</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-jewel>
                    <tr>
                        <td><a href="https://mhrise.kiranico.com/{{sourceLang.code}}/data/decorations/{{jewel.id}}" target="_blank">{{jewel.sourceName}}</a></td>
                        <td><a href="https://mhrise.kiranico.com/{{targetLang.code}}/data/decorations/{{jewel.id}}" target="_blank">{{jewel.targetName}}</a></td>
                        <td>{{jewel.ability}}</td>
                        <td>{{jewel.desc}}</td>
                    </tr>
                </ng-template>
            </p-table>
        </section>
    </p-card>
</main>